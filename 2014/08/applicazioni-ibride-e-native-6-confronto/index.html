<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Applicazioni Ibride e Native #6 – Confronto</title>
	
	<meta name="author" content="Daniele Campogiani">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/blog/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/blog/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/blog/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/blog/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/blog/feed.xml">

    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-113556465-1', 'auto');
	ga('send', 'pageview', { 'page': location.pathname + location.search + location.hash});
	ga('set', 'anonymizeIp', false);
    </script>
    <!-- End Google Analytics -->
    </head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/dcampogiani">
				<i class="fa fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="http://twitter.com/dcampogiani">
				<i class="fa fa-twitter"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:daniele.campogiani@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="/blog/">
				<img src="/blog/assets/avatar.jpg" class="img-circle" />
				Daniele Campogiani
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/blog/">Blog</a></li>
				<li><a href="http://dcampogiani.github.io/">Website</a></li>
				<li><a href="/blog/categories">Categories</a></li>
				<li><a href="/blog/tags">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/blog/"><i class="fa fa-book"></i>Blog</a></li>
			<li><a href="http://dcampogiani.github.io/"><i class="fa fa-home"></i>Website</a></li>
			<li><a href="/blog/categories"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/blog/tags"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs">
		<! -- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/blog/">
		<img src="/blog/assets/avatar.jpg" class="img-circle" />
	</a>
	<h3 class="title">
        <a href="/blog/">Daniele Campogiani</a>
    </h3>
</header>


<div id="bio" class="text-center">
	Software Engineer
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		<li>
			<a class="btn btn-default btn-sm" href="http://dcampogiani.github.io/">
				<i class="fa fa-home fa-lg"></i>
			</a>
		</li>
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/dcampogiani">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://twitter.com/dcampogiani">
				<i class="fa fa-twitter fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:daniele.campogiani@gmail.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://linkedin.com/pub/danielecampogiani">
				<i class="fa fa-linkedin fa-lg"></i>
			</a>
		</li>
		
		<li>
			<a class="btn btn-default btn-sm" href="/blog/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<! -- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
  <h1>Applicazioni Ibride e Native #6 – Confronto </h1>
</div>
	
<article>

	<div class="col-sm-10">
	 <span class="post-date">
	   
	   August 
	   1st,
	     
	   2014
	 </span>
	  <div class="article_body">
	  <h2>Dimensione Apk</h2>
<h3>Applicazione Ibrida</h3>
<p class="western">Per quanto riguarda l'applicazione ibrida il file <i>apk</i> è stato generato due volte, una volta senza minimizzare il codice e una volta minimizzandolo ottenendo dei risultati non aspettati, come mostrato in tabella:</p>
<p class="western"><!--more--></p>
<img title="tabella codice" src="/blog/assets/tabella-codice.png"/>
<p class="western">Come si può notare, semplicemente minimizzando il codice otteniamo un file circa cinque volte più piccolo. Una volta installata sul dispositivo l'applicazione occupa 1,2 MB.</p>
<h3 class="western">Applicazione Nativa</h3>
<p class="western">Il file apk generato dal codice dell'applicazione nativa è di 2,1 MB. Nel codice utilizzo una libreria esterna per la gestione delle animazioni, senza usare questa libreria il file apk è di 2 MB.</p>
<p class="western">Una volta installata l'applicazione occupa nel dispositivo 6,4 MB.</p>
<h2 class="western">Linee di Codice</h2>
<p class="western">Trattandosi di applicazioni scritte in linguaggi diversi il confronto è da considerarsi puramente indicativo, inoltre non viene preso in considerazione il codice di librerie utilizzate ma solo il codice effettivamente scritto per l'applicazione.</p>
<h3 class="western">Applicazione Ibrida</h3>
<p class="western">Sono stati scritti 10 file in Javascript per un totale di 649 righe di codice, un file CSS di 5 righe e 6 file HTML per un totale di 164 righe. Sommando tutti i file otteniamo 818 righe di codice.</p>
<h3 class="western">Applicazione Nativa</h3>
<p class="western">Per quanto riguarda l'applicazione nativa sono stati scritti 6 file Java per un totale di 828 righe di codice e 8 file XML per un totale di 180 righe di codice. Nel complesso sono state scritte 1008 righe di codice.</p>
<h2 class="western">Tempo necessario per scattare e memorizzare un'immagine</h2>
<p class="western">I seguenti risultati sono stati ottenuti utilizzando un Nexus 7 2013 con Android in versione 4.4.2 ( custom rom ParanoidAndroid 4.3-Beta7) dotato di CPU quad core a 1.5 GHz e 2GB di RAM.</p>
<p class="western">Le foto in esame sono state scattate con la fotocamera frontale.</p>
<p class="western">Ho calcolato due intervalli di tempo: il primo (chiamato <i>acquisizione</i> nelle successive tabelle) è il lasso di tempo che trascorre tra la pressione del tasto per scattare una fotografia e la restituzione del controllo all'applicazione (sia nativa che ibrida) con la foto appena scattata, e il secondo (chiamato <i>salvataggio</i> nelle tabelle) è il tempo necessario per memorizzare l'immagine nel filesystem e nel database dell'applicazione.</p>
<p class="western">Ho eseguito questo test sia con le due applicazione <i>“pulite”</i> (ossia senza nessuna foto ancora memorizzata) sia con cinque foto memorizzate senza riscontrare però cambiamenti degni di essere considerati.</p>
<p class="western">Inoltre ho eseguito il test considerando il fatto che la foto che stessi scattando fosse la prima (dall'apertura dell'applicazione) oppure se fosse una foto successiva, e anche in questo caso non ci sono stati cambiamenti degni di nota.</p>
<h3 class="western">Applicazione Ibrida</h3>
<p class="western">In tabella sono riportati in millisecondi i due intervalli sopra descritti nel caso di applicazione con zero foto memorizzate e prima foto scattata dall'apertura dell'applicazione</p>
<img title="tabella tempo foto ibrida" src="/blog/assets/tabella-tempo-foto-ibrida.png"/>
<p class="western">In media sono necessari 3602 millisecondi per acquisire un immagine e 197 secondi per memorizzarla.</p>
<p class="western">Non sono riportati i test con applicazione con cinque foto memorizzate oppure il caso in cui la foto scattata non fosse la prima dall'apertura dell'applicazione perché hanno differenze non significative rispetto al caso riportato.</p>
<h3 class="western">Applicazione Nativa</h3>
<p class="western">Analogamente all'applicazione Ibrida riporto in tabella i valori dei due intervalli ottenuti in cinque test</p>
<img title="tabella tempo foto nativa" src="/blog/assets/tabella-tempo-foto-nativa.png"/>
<p class="western">Anche in questo caso non ho riscontrato cambiamenti degni di nota effettuando test con applicazione con cinque foto memorizzate, o scattando una foto che non fosse la prima dall'apertura dell'applicazione, per cui riporto solo il caso di applicazione <i>“pulita”</i> e prima foto scattata.</p>
<p class="western">In media sono necessari 3254,6 millisecondi per scattare una fotografia e 50,4 millisecondi per memorizzarla nel filesystem e nel database.</p>
<h3 class="western">Analisi dei risultati</h3>
<p class="western">Per quanto riguarda l'acquisizione dell'immagine l'applicazione ibrida è leggermente più lenta, invece per quanto riguarda la memorizzazione impiega circa quattro volte il tempo impiegato dall'applicazione nativa.</p>
<h2 class="western">Utilizzo di memoria</h2>
<p class="western">Ho misurato l'utilizzo di RAM delle due applicazioni, e come si può notare in tabella l'applicazione ibrida richiede una quantità di memoria decisamente maggiore.</p>
<h3 class="western">Apertura</h3>
<p class="western"><span style="font-family: Helvetica, sans-serif;">È</span><span style="font-family: Helvetica, sans-serif;"> qui di seguito riportata la RAM occupata all'apertura, al variare del numero di immagini memorizzare nell'applicazione:</span></p>
<img title="tabella ram apertura" src="/blog/assets/tabella-ram-apertura.png"/>
<p class="western"><span style="font-family: Helvetica, sans-serif;">L'applicazione ibrida richiede sempre almeno 106 MB di memoria, mentre l'applicazione nativa ne usa quasi un sesto.</span></p>
<h3 class="western">Scorrimento nella timeline</h3>
<p class="western"><span style="font-family: Helvetica, sans-serif;">Riporto in tabella l'utilizzo di RAM delle due applicazioni dopo aver visualizzato tutte le foto nella timeline (scorrendo la view fino in fondo e poi tornando in cima), anche in questo caso al variare di foto memorizzate:</span></p>
<img title="tabella ram timeline" src="/blog/assets/tabella-ram-timeline.png"/>
<p class="western"><span style="font-family: Helvetica, sans-serif;">L'applicazione nativa utilizza quindi circa un quarto della memoria richiesta dall'applicazione ibrida.</span></p>
<h3 class="western">Mappa</h3>
<p class="western"><span style="font-family: Helvetica, sans-serif;">Spostandosi nella view che mostra le foto sulla mappa abbiamo questi dati:</span></p>
<img title="tabella ram mappa" src="/blog/assets/tabella-ram-mappa.png"/>
<p class="western"><span style="font-family: Helvetica, sans-serif;">Anche in questo caso l'applicazione ibrida risulta molto più </span><span style="font-family: Helvetica, sans-serif;"><i>“pesante”</i></span><span style="font-family: Helvetica, sans-serif;">, richiedendo circa tre volte la memoria necessaria all'applicazione nativa.</span></p>
<h2 class="western">Considerazioni finali</h2>
<p class="western"><span style="font-family: Helvetica, sans-serif;">Il modello applicativo utilizzato per realizzare l'applicazione ibrida (utilizzando il framework AngularJS) è molto più semplice del modello usato da Android per la realizzazione di applicazioni native. In AngularJS oltre alle view HTML, </span><span style="font-family: Helvetica, sans-serif;">le directive</span><span style="font-family: Helvetica, sans-serif;"> e </span><span style="font-family: Helvetica, sans-serif;">i </span><span style="font-family: Helvetica, sans-serif;">controller esistono i servizi, componenti software singleton che si occupano di tutto il resto. In Android invece esistono molto più componenti.</span></p>
<p class="western"><span style="font-family: Helvetica, sans-serif;">Risulta quindi più facile all'inizio sviluppare un'applicazione ibrida, ma una volta capiti i diversi componenti che Android fornisce, si riesce ad avere un'applicazione con una miglior </span><span style="font-family: Helvetica, sans-serif;">struttura</span><span style="font-family: Helvetica, sans-serif;">, e a scrivere meno codice perché Android realizza già molte funzionalità di base.</span></p>
<p class="western"><span style="font-family: Helvetica, sans-serif;">Per quanto riguarda i tools forniti agli sviluppatori non c'è paragone, il supporto fornito a sviluppatori Cordova è praticamente inesistente e limitato all'uso del terminale attraverso lo strumento chiamato </span><span style="font-family: Helvetica, sans-serif;"><i>Cordova Command-line Interface</i></span><span style="font-family: Helvetica, sans-serif;">. Per questo motivo mi sono trovato costretto ad utilizzare una serie di tool esterni per migliorare il workflow </span><span style="font-family: Helvetica, sans-serif;">come </span><span style="font-family: Helvetica, sans-serif;"><i>Grunt</i></span><span style="font-family: Helvetica, sans-serif;">, </span><span style="font-family: Helvetica, sans-serif;"><i>Bower</i></span><span style="font-family: Helvetica, sans-serif;"> e </span><span style="font-family: Helvetica, sans-serif;"><i>Yeoman</i></span><span style="font-family: Helvetica, sans-serif;">. </span><span style="font-family: Helvetica, sans-serif;">Anche il debug è più complicato trattandosi di codice interpretato.</span></p>
<p class="western"><span style="font-family: Helvetica, sans-serif;">Per lo sviluppo dell'applicazione nativa ho invece utilizzato </span><span style="font-family: Helvetica, sans-serif;"><i>Android Studio</i></span><span style="font-family: Helvetica, sans-serif;"> una soluzione completa fornita da google per lo sviluppo, il test e il deploy delle applicazioni.</span></p>
<p class="western"><span style="font-family: Helvetica, sans-serif;">Confrontando le performances delle due applicazioni risulta nettamente vincitrice l'applicazione nativa, sia per il consumo di memoria che per la fluidità ottenuta. L'applicazione ibrida in particolare ha uno scroll molto più lento nelle liste.</span></p>
<p class="western"><span style="font-family: Helvetica, sans-serif;">Punto a favore dell'applicazione ibrida invece è la possibilità di riutilizzo del codice scritto, infatti i componenti scritti possono essere utilizzati sia in una applicazione mobile/ibrida che un normale sito web. Ovviamente in un normale sito web non si hanno a disposizione le API fornite da Cordova, ma i componenti che non l</span><span style="font-family: Helvetica, sans-serif;">e</span><span style="font-family: Helvetica, sans-serif;"> usano possono essere </span><span style="font-family: Helvetica, sans-serif;"><i>“</i></span><span style="font-family: Helvetica, sans-serif;"><i>portati”</i></span><span style="font-family: Helvetica, sans-serif;"> anche su desktop, mi sono infatti spesso trovato a provare l'applicazione su browser desktop prima di effettuare il deploy su dispositivo per controllare velocemente le modifiche apportate. Nello specifico l'unica API che non </span><span style="font-family: Helvetica, sans-serif;">ho potuto</span><span style="font-family: Helvetica, sans-serif;"> utilizzare da desktop è quella di accesso alla fotocamera, </span><span style="font-family: Helvetica, sans-serif;">mentre per la persistenza e la geo-localizzazione non ho avuto problemi poiché Chrome fornisce le stesse API che Cordova implementa su dispositivi mobili. </span><span style="font-family: Helvetica, sans-serif;">Vale la pena ricordare inoltre ricordare che una applicazione scritta utilizzando Cordova può essere utilizzata su più piattaforme mobile, mentre nel caso di applicazione nativa si è limitati ad una sola piattaforma.</span></p>
<p class="western"><span style="font-family: Helvetica, sans-serif;">Android pur utilizzando codice Java forza lo sviluppatore a realizzare componenti estendendo quelli forniti dalla piattaforma, per cui questi componenti non possono essere </span><span style="font-family: Helvetica, sans-serif;"><i>“portati”</i></span><span style="font-family: Helvetica, sans-serif;"> su una normale </span><span style="font-family: Helvetica, sans-serif;"><i>JVM</i></span><span style="font-family: Helvetica, sans-serif;"> desktop.</span></p>
<p class="western"><span style="font-family: Helvetica, sans-serif;">Inoltre per la scrittura di una applicazione nativa, il produttore della piattaforma fornisce uno stack completo di supporto (dall'interfaccia grafica all'accesso all'hardware) mentre Cordova fornisce solo un set di API per l'accesso al dispositivo e nessun supporto per la realizzazione di UI, e ho dovuto quindi utilizzare un framework esterno.</span></p>

	  </div>

		
		<ul class="tag_box list-unstyled list-inline">
		  <li><i class="fa fa-folder-open"></i></li>
		  
		  
			 
				<li><a href="/categories#Applicazioni Ibride e Native-ref">
					Applicazioni Ibride e Native <span>(6)</span>
					,
				</a></li>
			 
				<li><a href="/categories#Programmazione-ref">
					Programmazione <span>(6)</span>
					
				</a></li>
			
		  
		</ul>
		  

		
		<ul class="list-inline">
		  <li><i class="fa fa-tags"></i></li>
		  
		  
			 
				<li>
					<a href="/tags#applicazioni ibride-ref">
					applicazioni ibride <span>(4)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags#applicazioni native-ref">
					applicazioni native <span>(2)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags#performances-ref">
					performances <span>(1)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags#test-ref">
					test <span>(1)</span>
					
					</a>
				</li>
			
		  
		  
		</ul>
		  

		<hr>

		<div>
      <section class="share col-sm-6">
        <h4 class="section-title">Share Post</h4>
        <a class="btn btn-default btn-sm twitter" href="http://twitter.com/share?text=Applicazioni Ibride e Native #6 – Confronto&via=dcampogiani"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>
        <a class="btn btn-default btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <i class="fa fa-facebook fa-lg"></i>
          Facebook
        </a>
        <a class="btn btn-default btn-sm gplus"
           onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus fa-lg"></i>
          Google+
        </a>
      </section>

      <section class="col-sm-6 author">
        <img src="/blog/assets/avatar.jpg" class="img-rounded author-image" />
        <h4 class="section-title author-name">Daniele Campogiani</h4>
        <p class="author-bio">Software Engineer</p>
      </section>
    </div>

	<hr>
	
	    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'danielecampogiani'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    

    <div class="clearfix"></div>

		<ul class="pager">
		  
		  <li class="previous"><a href="/2014/07/applicazioni-ibride-e-native-5-realizzazione-di-una-applicazione-nativa/" title="Applicazioni Ibride e Native #5 – Realizzazione di una Applicazione Nativa">&larr; Previous</a></li>
		  
		  
		  <li class="next"><a href="/2018/02/android-functional-validation-1-intro/" title="Android Functional Validation 1 - Introduction">Next &rarr;</a></li>
		  
		</ul>

		<hr>
	</div>
	
	<div class="col-sm-2 sidebar-2">
	
	</div>
</article>
<div class="clearfix"></div>



		<footer>
			<hr/>
			<p>
				&copy; 2018 Daniele Campogiani with Jekyll. Theme: <a href="https://github.com/dbtek/dbyll">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/blog/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/blog/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/blog/assets/js/app.js"></script>
</body>
</html>

